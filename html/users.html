<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Management</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    rel="stylesheet"
  />
</head>
<body class="bg-light">
  <div class="container py-4">
    <h3 class="mb-4">User Management</h3>
  
    <div class="d-flex gap-2 mb-3">
      <button id="btnBlock" class="btn btn-primary">Block</button>

      <button id="btnUnblock" class="btn btn-outline-primary" disabled>
        <i class="bi bi-unlock"></i>
      </button>

      <button id="btnDelete" class="btn btn-outline-danger" disabled>
        <i class="bi bi-trash"></i>
      </button>

      <button id="btnDeleteUnverified" class="btn btn-outline-danger" disabled>
        <i class="bi bi-person-x"></i>
      </button>
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>
              <input type="checkbox" id="selectAll"/>
            </th>
            <th>Name</th>
            <th>Email</th>
            <th>Status</th>
            <th id="sortLastLogin" 
            style="cursor: pointer;">
            Last Seen
            <i class="bi bi-arrow-down-up ms-1"></i>
            </th>
          </tr>
        </thead>
    
        <tbody>
          <tr>
            <td><input 
              type="checkbox" 
              class="row-checkbox"/></td>
            <td>Alex Clare</td>
            <td>a_clare42@gmail.com</td>
            <td><span class="badge bg-success">Active</span></td>
            <td data-last-login="1706600000000">5 minutes ago</td>
          </tr>
    
          <tr>
            <td><input type="checkbox" 
              class="row-checkbox"/></td>
            <td>Nina Simone</td>
            <td>nina@mail.com</td>
            <td><span class="badge bg-danger">Blocked</span></td>
            <td data-last-login="1700000000000">3 weeks ago</td>
          </tr>
    
          <tr>
            <td><input type="checkbox" 
              class="row-checkbox"/></td>
            <td>Frank Zappa</td>
            <td>zappa@mail.com</td>
            <td><span class="badge bg-warning text-dark">Unverified</span></td>
            <td data-last-login="1706900000000">less than a minute ago</td>
          </tr>
        </tbody>
      </table>
    </div>
    
  </div>

<script>
  
  let isAscending = false;

  const sortHeader = document.getElementById('sortLastLogin');
  const tableBody = document.querySelector('tbody');

  sortHeader.addEventListener('click', () => {
    const rows = Array.from(tableBody.querySelectorAll('tr'));

    rows.sort((a, b) => {
      const aTime = Number(a.querySelector('[data-last-login]').dataset.lastLogin);
      const bTime = Number(b.querySelector('[data-last-login]').dataset.lastLogin);

      return isAscending ? aTime - bTime : bTime - aTime;
    });


    rows.forEach(row => tableBody.appendChild(row));

    isAscending = !isAscending;
  });

    const selectAllCheckbox = document.getElementById('selectAll');
    const rowCheckboxes = document.querySelectorAll('.row-checkbox');
  
    const toolbarButtons = [
      document.getElementById('btnBlock'),
      document.getElementById('btnUnblock'),
      document.getElementById('btnDelete'),
      document.getElementById('btnDeleteUnverified')
    ];
  
    
    function updateToolbarState() {
      const anyChecked = Array.from(rowCheckboxes).some(cb => cb.checked);
  
      toolbarButtons.forEach(btn => {
        btn.disabled = !anyChecked;
      });
    }
  
    
    selectAllCheckbox.addEventListener('change', () => {
      rowCheckboxes.forEach(cb => {
        cb.checked = selectAllCheckbox.checked;
      });
      updateToolbarState();
    });
  
    
    rowCheckboxes.forEach(cb => {
      cb.addEventListener('change', () => {
        const allChecked = Array.from(rowCheckboxes).every(cb => cb.checked);
        selectAllCheckbox.checked = allChecked;
  
        updateToolbarState();
      });
    });
</script>
  
</body>
</html>
    